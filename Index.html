<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<link rel="manifest" href="manifest.webmanifest">
<script>
if ('serviceWorker' in navigator) {
navigator.serviceWorker.register('sw.js');
}
</script>
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />
<title>Ù…Ø­Ø§Ø³Ø¨Ù‡ ØªÙˆÙ„ÛŒØ¯ Ùˆ ØªÙˆÙ‚Ù</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
font-family: sans-serif;
direction: rtl;
padding: 20px;
background: #f0f0f0;
max-width: 500px;
margin: auto;
}
h2 {
text-align: center;
margin-bottom: 20px;
}
label {
display: block;
margin-top: 10px;
font-size: 16px;
}
input {
width: 100%;
padding: 10px;
font-size: 16px;
margin-top: 5px;
box-sizing: border-box;
border: 1px solid #ccc;
border-radius: 6px;
}
button {
width: 100%;
padding: 12px;
font-size: 16px;
margin-top: 20px;
background-color: #2196f3;
color: white;
border: none;
border-radius: 6px;
cursor: pointer;
}
button:hover {
background-color: #1976d2;
}
.result {
margin-top: 25px;
background: white;
padding: 15px;
border-radius: 8px;
font-size: 16px;
line-height: 1.8;
box-shadow: 0 0 5px rgba(0,0,0,0.1);
}
</style>
</head>
<body>
<h2>ÙØ±Ù… Ù…Ø­Ø§Ø³Ø¨Ù‡ ØªÙˆÙ„ÛŒØ¯</h2>

<label>â± Ø²Ù…Ø§Ù† Ø¶Ø±Ø¨ Ø¯Ø³ØªÚ¯Ø§Ù‡ (Ø«Ø§Ù†ÛŒÙ‡):</label>
<input type="number" id="cycleTime">

<label>ğŸ•’ Ø³Ø§Ø¹Øª Ø´Ø±ÙˆØ¹:</label>
<input type="number" id="startHour" placeholder="Ø³Ø§Ø¹Øª">
<input type="number" id="startMinute" placeholder="Ø¯Ù‚ÛŒÙ‚Ù‡">

<label>ğŸ•” Ø³Ø§Ø¹Øª Ù¾Ø§ÛŒØ§Ù†:</label>
<input type="number" id="endHour" placeholder="Ø³Ø§Ø¹Øª">
<input type="number" id="endMinute" placeholder="Ø¯Ù‚ÛŒÙ‚Ù‡">

<label>ğŸ”¢ Ù…Ù‚Ø¯Ø§Ø± Ø¶Ø±Ø¨ Ø²Ø¯Ù‡ Ø´Ø¯Ù‡:</label>
<input type="number" id="produced">

<label>ğŸ§© ØªØ¹Ø¯Ø§Ø¯ Ú©ÙˆÛŒØªÙ‡ ÙØ¹Ø§Ù„:</label>
<input type="number" id="activeCavity">

<label>ğŸ“¦ Ù…Ø§Ù†Ø¯Ù‡ Ø¯Ø± Ø®Ø· Ø´ÛŒÙØª Ù‚Ø¨Ù„:</label>
<input type="number" id="previousRemain">

<label>ğŸ—‘ ØªØ¹Ø¯Ø§Ø¯ Ø¶Ø§ÛŒØ¹Ø§Øª:</label>
<input type="number" id="waste">

<label>ğŸ­ ØªØ¹Ø¯Ø§Ø¯ ÙˆØ±ÙˆØ¯ÛŒ Ø¨Ù‡ Ø§Ù†Ø¨Ø§Ø±:</label>
<input type="number" id="warehouseIn">

<label>âš–ï¸ ÙˆØ²Ù† Ù‚Ø·Ø¹Ù‡ Ùˆ Ø±Ø§Ù‡Ú¯Ø§Ù‡ (Ú¯Ø±Ù…):</label>
<input type="number" id="partWeight">

<button onclick="calculate()">Ù…Ø­Ø§Ø³Ø¨Ù‡</button>

<div class="result" id="result"></div>

<script>
function calculate() {
const cycleTime = parseFloat(document.getElementById('cycleTime').value);
const startHour = parseInt(document.getElementById('startHour').value);
const startMinute = parseInt(document.getElementById('startMinute').value);
const endHour = parseInt(document.getElementById('endHour').value);
const endMinute = parseInt(document.getElementById('endMinute').value);
const produced = parseInt(document.getElementById('produced').value);
const activeCavity = parseInt(document.getElementById('activeCavity').value);
const previousRemain = parseInt(document.getElementById('previousRemain').value);
const waste = parseInt(document.getElementById('waste').value);
const warehouseIn = parseInt(document.getElementById('warehouseIn').value);
const partWeight = parseFloat(document.getElementById('partWeight').value);

const startSec = (startHour * 60 + startMinute) * 60;
const endSec = (endHour * 60 + endMinute) * 60;

// Ø¨Ø±Ø±Ø³ÛŒ Ù†Ø§Ù‡Ø§Ø± Ùˆ Ø´Ø§Ù…
let lunchBreak = 0;
if ((startHour < 12 || (startHour === 12 && startMinute < 30)) &&
(endHour > 13 || (endHour === 13 && endMinute > 0))) {
lunchBreak += 1800;
}
if ((startHour < 21 || (startHour === 21 && startMinute < 30)) &&
(endHour > 22 || (endHour === 22 && endMinute > 0))) {
lunchBreak += 1800;
}

const totalTimeSec = endSec - startSec - lunchBreak;
const targetProduction = Math.floor(totalTimeSec / cycleTime);
const actualProduction = isNaN(produced) ? targetProduction : produced;

// ØªÙˆÙ‚Ù
const missed = targetProduction - actualProduction;
const downtimeMin = missed > 0 ? (missed * cycleTime) / 60 : 0;

// Ù…Ø§Ù†Ø¯Ù‡ Ø¯Ø± Ø®Ø·
const remainInLine = (actualProduction * activeCavity) + previousRemain - waste - warehouseIn;

// Ù…ÙˆØ§Ø¯ Ù…ØµØ±ÙÛŒ
let materialUsedKg = 0;
if (!isNaN(partWeight)) {
const totalParts = isNaN(produced) ? targetProduction : produced;
materialUsedKg = (partWeight * totalParts) / 1000;
}

document.getElementById('result').innerHTML = `
â³ Ø²Ù…Ø§Ù† ØªÙˆÙ‚Ù: ${downtimeMin.toFixed(2)} Ø¯Ù‚ÛŒÙ‚Ù‡<br>
ğŸ“¦ Ù…Ø§Ù†Ø¯Ù‡ Ø¯Ø± Ø®Ø·: ${remainInLine}<br>
âš–ï¸ Ù…ÙˆØ§Ø¯ Ù…ØµØ±ÙÛŒ: ${materialUsedKg.toFixed(2)} Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…<br>
ğŸ½ Ø²Ù…Ø§Ù† Ù†Ø§Ù‡Ø§Ø±/Ø´Ø§Ù… Ù„Ø­Ø§Ø¸ Ø´Ø¯Ù‡: ${lunchBreak / 60} Ø¯Ù‚ÛŒÙ‚Ù‡
`;
}
</script>
</body>
</html>